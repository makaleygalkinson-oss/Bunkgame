# Инструкция по диагностике проблем

## Проблема: Кнопки "Создать" и "Присоединиться" не работают

### Шаг 1: Проверьте консоль браузера

1. Откройте сайт в браузере
2. Нажмите **F12** (или правой кнопкой → "Просмотреть код")
3. Перейдите на вкладку **Console**
4. Попробуйте нажать кнопку "Создать Лобби"
5. Посмотрите, что выводится в консоли

### Шаг 2: Что должно происходить

При нажатии на кнопку "Создать Лобби" вы должны увидеть в консоли:
```
Create lobby button clicked
CreateLobbyModal isOpen: true
CreateLobbyModal: rendering
```

При заполнении формы и нажатии "Создать":
```
Form submitted: {playerName: "...", roomName: "...", activeRoles: "..."}
Calling onSubmit with: {...}
handleCreateLobby called with: {...}
Sending request to /api/game/create
Response status: 200 (или ошибка)
```

### Шаг 3: Проверьте Network запросы

1. В DevTools перейдите на вкладку **Network**
2. Попробуйте создать лобби
3. Найдите запрос к `/api/game/create`
4. Посмотрите:
   - **Status** (должен быть 200 для успеха)
   - **Response** (что вернул сервер)
   - **Request Payload** (что отправили)

### Шаг 4: Проверьте, что сервер запущен

Убедитесь, что вы запустили:
```bash
npm run dev
```

Должно быть сообщение:
```
✓ Ready in Xs
○ Local: http://localhost:3000
```

### Шаг 5: Проверьте переменные окружения

Убедитесь, что файл `.env.local` существует и содержит:
```env
NEXT_PUBLIC_SUPABASE_URL=...
NEXT_PUBLIC_SUPABASE_ANON_KEY=...
SUPABASE_SERVICE_ROLE_KEY=...
```

### Шаг 6: Проверьте базу данных

1. Убедитесь, что Supabase проект активен
2. Проверьте, что SQL скрипт выполнен (`supabase/schema.sql`)
3. В Supabase Dashboard → Table Editor проверьте наличие таблиц:
   - `games`
   - `players`

### Шаг 7: Типичные ошибки

#### Ошибка: "Failed to fetch"
- Проверьте, что сервер запущен (`npm run dev`)
- Проверьте URL в браузере (должен быть `http://localhost:3000`)

#### Ошибка: "Supabase credentials are missing"
- Проверьте файл `.env.local`
- Перезапустите сервер после изменения `.env.local`

#### Ошибка: "relation does not exist"
- Выполните SQL скрипт в Supabase SQL Editor

#### Ошибка: "permission denied"
- Проверьте RLS политики в Supabase
- Убедитесь, что используете правильные ключи

### Шаг 8: Если ничего не помогает

1. Очистите кэш браузера (Ctrl+Shift+Delete)
2. Перезапустите dev-сервер
3. Проверьте логи в терминале, где запущен `npm run dev`
4. Проверьте логи в Supabase Dashboard → Logs

## Быстрая проверка

Откройте консоль браузера и выполните:
```javascript
// Проверка, что модальное окно может открыться
console.log('Test: Opening create modal')
// Затем нажмите кнопку "Создать Лобби"
```

Если в консоли ничего не появляется при нажатии кнопки - проблема в обработчике событий.
Если появляется, но модальное окно не видно - проблема в CSS/стилях.

